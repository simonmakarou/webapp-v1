# Деплой и настройка базового пути

## Для чего нужен `BASE_PATH`

Vite использует параметр `base`, чтобы генерировать корректные ссылки на ассеты и роуты в production-сборке. В этом проекте значение вычисляется автоматически:

- сначала проверяется переменная окружения `BASE_PATH`;
- затем — значение из `package.json` (берётся `homepage` или, при его отсутствии, имя пакета `/${name}/`);
- в качестве последнего fallback используется `/`.

Таким образом сборка, выполненная без настроек, остаётся совместима с локальным запуском, а GitHub Pages и другие поддиректории получают предсказуемый префикс.

## Как задать путь для production

1. Для единичной сборки можно передать переменную прямо в команду:

   ```bash
   BASE_PATH=/webapp-v1/ npm run build
   ```

2. Для постоянного значения создайте файл `.env.production`:

   ```dotenv
   BASE_PATH=/webapp-v1/
   ```

   Vite автоматически подхватит этот файл при `npm run build` и `npm run preview`.

## Smoke-проверка в CI

GitHub Actions выполняет связку `npm run build && npm run preview` с нестандартным `BASE_PATH`, чтобы убедиться, что собранный бандл корректно обслуживается из поддиректории. Если статические ресурсы указывают на неверный путь, шаг завершится ошибкой.

## Рекомендации для GitHub Pages

- `BASE_PATH` должен совпадать с именем репозитория (`/webapp-v1/`).
- Перед запуском `npm run preview` убедитесь, что выполнен `npm run build` — команда использует собранную папку `dist`.
- При использовании Pages через Actions можно прокинуть переменную окружения в шаг сборки: `BASE_PATH: /webapp-v1/`.
